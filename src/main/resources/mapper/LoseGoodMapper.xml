<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.du.dao.LoseGoodMapper">
  <resultMap id="BaseResultMap" type="com.du.entry.LoseGood">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Dec 25 21:27:10 CST 2017.
    -->
    <id column="lose_id" jdbcType="INTEGER" property="loseId" />
    <result column="lose_name" jdbcType="VARCHAR" property="loseName" />
    <result column="lose_description" jdbcType="VARCHAR" property="loseDescription" />
    <result column="lose_time" jdbcType="TIMESTAMP" property="loseTime" />
    <result column="lose_checked" jdbcType="VARCHAR" property="loseChecked" />
    <result column="lose_claim" jdbcType="VARCHAR" property="loseClaim" />
    <result column="student_num" jdbcType="VARCHAR" property="studentNum" />
    <result column="lose_img" jdbcType="VARCHAR" property="loseImg" />
    <result column="lose_type" jdbcType="VARCHAR" property="loseType" />
  </resultMap>
 <!-- <resultMap extends="BaseResultMap" id="ResultMapWithBLOBs" type="com.du.entry.LoseGood">
    &lt;!&ndash;
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Dec 25 21:27:10 CST 2017.
    &ndash;&gt;
    <result column="lose_img" jdbcType="LONGVARBINARY" property="loseImg" />
  </resultMap>-->
  <sql id="Base_Column_List">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Dec 25 21:27:10 CST 2017.
    -->
    lose_id, lose_name, lose_description, lose_time,
    lose_checked, lose_claim, student_num, lose_img,lose_type
  </sql>
 <!-- <sql id="Blob_Column_List">
    &lt;!&ndash;
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Dec 25 21:27:10 CST 2017.
    &ndash;&gt;
    lose_img
  </sql>-->
  <select id="selectByPrimaryKey" parameterType="java.lang.Integer" resultMap="BaseResultMap">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Dec 25 21:27:10 CST 2017.
    -->
    select 
    <include refid="Base_Column_List" />
    ,
   <!-- <include refid="Blob_Column_List" />-->
    from lose_goods
    where lose_id = #{loseId,jdbcType=INTEGER}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Integer">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Dec 25 21:27:10 CST 2017.
    -->
    delete from lose_goods
    where lose_id = #{loseId,jdbcType=INTEGER}
  </delete>
  <insert id="insert" parameterType="com.du.entry.LoseGood">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Dec 25 21:27:10 CST 2017.
    -->
    insert into lose_goods (lose_id, lose_name, lose_description, 
      lose_time, lose_checked, lose_claim, 
      student_num, lose_img,lose_type)
    values (#{loseId,jdbcType=INTEGER}, #{loseName,jdbcType=VARCHAR}, #{loseDescription,jdbcType=VARCHAR}, 
      #{loseTime,jdbcType=TIMESTAMP}, #{loseChecked,jdbcType=VARCHAR}, #{loseClaim,jdbcType=VARCHAR}, 
      #{studentNum,jdbcType=VARCHAR}, #{loseImg,jdbcType=VARCHAR},, #{loseType,jdbcType=VARCHAR})
  </insert>
  <insert id="insertSelective" parameterType="com.du.entry.LoseGood">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Dec 25 21:27:10 CST 2017.
    -->
    insert into lose_goods
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="loseId != null">
        lose_id,
      </if>
      <if test="loseName != null">
        lose_name,
      </if>
      <if test="loseDescription != null">
        lose_description,
      </if>
      <if test="loseTime != null">
        lose_time,
      </if>
      <if test="loseChecked != null">
        lose_checked,
      </if>
      <if test="loseClaim != null">
        lose_claim,
      </if>
      <if test="studentNum != null">
        student_num,
      </if>
      <if test="loseImg != null">
        lose_img,
      </if>
      <if test="loseType != null">
        lose_type,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      <if test="loseId != null">
        #{loseId,jdbcType=INTEGER},
      </if>
      <if test="loseName != null">
        #{loseName,jdbcType=VARCHAR},
      </if>
      <if test="loseDescription != null">
        #{loseDescription,jdbcType=VARCHAR},
      </if>
      <if test="loseTime != null">
        #{loseTime,jdbcType=TIMESTAMP},
      </if>
      <if test="loseChecked != null">
        #{loseChecked,jdbcType=VARCHAR},
      </if>
      <if test="loseClaim != null">
        #{loseClaim,jdbcType=VARCHAR},
      </if>
      <if test="studentNum != null">
        #{studentNum,jdbcType=VARCHAR},
      </if>
      <if test="loseImg != null">
        #{loseImg,jdbcType=VARCHAR},
      </if>
      <if test="loseType != null">
        #{loseType,jdbcType=VARCHAR},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="com.du.entry.LoseGood">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Dec 25 21:27:10 CST 2017.
    -->
    update lose_goods
    <set>
      <if test="loseName != null and loseName !=''">
        lose_name = #{loseName,jdbcType=VARCHAR},
      </if>
      <if test="loseDescription != null and loseDescription !=''">
        lose_description = #{loseDescription,jdbcType=VARCHAR},
      </if>
      <if test="loseTime != null and loseTime  !=''">
        lose_time = #{loseTime,jdbcType=TIMESTAMP},
      </if>
      <if test="loseChecked != null and loseChecked  !=''">
        lose_checked = #{loseChecked,jdbcType=VARCHAR},
      </if>
      <if test="loseClaim != null and loseClaim !=''">
        lose_claim = #{loseClaim,jdbcType=VARCHAR},
      </if>
      <if test="studentNum != null and studentNum !=''">
        student_num = #{studentNum,jdbcType=VARCHAR},
      </if>
      <if test="loseImg != null and loseImg !=''">
        lose_img = #{loseImg,jdbcType=VARCHAR},
      </if>
      <if test="loseType != null and loseType !=''">
        lose_type = #{loseType,jdbcType=VARCHAR},
      </if>
    </set>
    where lose_id = #{loseId,jdbcType=INTEGER}
  </update>
  <!--<update id="updateByPrimaryKeyWithBLOBs" parameterType="com.du.entry.LoseGood">
    &lt;!&ndash;
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Dec 25 21:27:10 CST 2017.
    &ndash;&gt;
    update lose_goods
    set lose_name = #{loseName,jdbcType=VARCHAR},
      lose_description = #{loseDescription,jdbcType=VARCHAR},
      lose_time = #{loseTime,jdbcType=TIMESTAMP},
      lose_checked = #{loseChecked,jdbcType=VARCHAR},
      lose_claim = #{loseClaim,jdbcType=VARCHAR},
      student_num = #{studentNum,jdbcType=VARCHAR},
      lose_img = #{loseImg,jdbcType=VARCHAR}
    where lose_id = #{loseId,jdbcType=INTEGER}
  </update>-->
  <update id="updateByPrimaryKey" parameterType="com.du.entry.LoseGood">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Dec 25 21:27:10 CST 2017.
    -->
    update lose_goods
    set lose_name = #{loseName,jdbcType=VARCHAR},
      lose_description = #{loseDescription,jdbcType=VARCHAR},
      lose_time = #{loseTime,jdbcType=TIMESTAMP},
      lose_checked = #{loseChecked,jdbcType=VARCHAR},
      lose_claim = #{loseClaim,jdbcType=VARCHAR},
      student_num = #{studentNum,jdbcType=VARCHAR},
      lose_img = #{loseImg,jdbcType=VARCHAR},
      lose_type = #{loseType,jdbcType=VARCHAR}
    where lose_id = #{loseId,jdbcType=INTEGER}
  </update>
  <!-- student_user页面的自动查询-->
  <select id="selectAutoLoseGood" parameterType="java.lang.Integer" resultMap="BaseResultMap">
    SELECT
    <include refid="Base_Column_List" />
    FROM lose_goods ORDER BY lose_time DESC LIMIT ${start}, ${end}
  </select>
<!--studnet_user下的lose页面：查找自己添加的失物信息-->
  <select id="selectAutoLoseGoodByNum" parameterType="java.lang.String" resultMap="BaseResultMap">
    SELECT
    <include refid="Base_Column_List" />
    FROM lose_goods WHERE student_num=#{student_num}
  </select>
<!--查询所有的信息-->
  <select id="selectAllLose" resultMap="BaseResultMap" >
  SELECT
    <include refid="Base_Column_List" />
   FROM lose_goods

  </select>

  <!---->
  <!--搜索-->
<select id="searchByKey" resultMap="BaseResultMap" parameterType="java.lang.Integer">
  SELECT
  <include refid="Base_Column_List" />
  FROM lose_goods
  WHERE
    <if test="loseName != null and loseName !=''">
      lose_name LIKE %#{key}% AND
    </if>
  <if test="type != null and type !=''">
    lose_type LIKE %#{type}% AND
  </if>
  <if test="time != null and time !=''">
      lose_time LIKE %#{time}% AND
  </if>
  <if test="local !=null and local !=''">
    lose_local LIKE  %#{local}%
  </if>
</select>

  <!--审核-->
  <update id="checked" parameterType="java.lang.Integer">
    UPDATE lose_goods
    SET lose_checked="是"
    WHERE lose_id=#{id}
  </update>

  <!--查询所有未审核的信息-->
  <select id="select_check">
    SELECT * FROM lose_goods
    WHERE lose_checked="否"
  </select>
  <!--查询所有已经审核的信息-->
  <select id="select_checked">
    SELECT * FROM lose_goods
    WHERE lose_checked="是"
  </select>
</mapper>